(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/binding/binding"],{"011c":function(e,t,n){"use strict";n.r(t);var i=n("a2f3"),o=n("edaf");for(var a in o)"default"!==a&&function(e){n.d(t,e,function(){return o[e]})}(a);n("88e0");var s=n("2877"),c=Object(s["a"])(o["default"],i["a"],i["b"],!1,null,"b756a72e",null);t["default"]=c.exports},"243d":function(e,t,n){"use strict";(function(e){n("b440"),n("921b");i(n("66fd"));var t=i(n("011c"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("6e42")["createPage"])},6677:function(e,t,n){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=c(n("f585")),a=c(n("e0d7")),s=n("7384");function c(e){return e&&e.__esModule?e:{default:e}}var d={data:function(){return{phone:"",code:"",codeText:"获取验证码",codeNum:"",isRight:!1,setCodeInterval:"",deviceId:"",appID:"wxb8afa388fa540c2a",fromWxLoginData:""}},components:{},onLoad:function(t){this.fromWxLoginData=JSON.parse(t.data),console.log(e("fromWxLoginData->",this.fromWxLoginData," at pages\\login\\binding\\binding.vue:49"))},onShow:function(){i.setStorageSync("isLogin",0)},methods:{doIsLogin:function(){this.isRight=!o.default.isPhone(this.phone)&&""!==this.code},getCode:function(){var t=this;if(console.log(e(o.default.isPhone(this.phone)," at pages\\login\\binding\\binding.vue:61")),""!==this.codeNum)return!1;if(o.default.isPhone(this.phone))return""===this.phone?(a.default.tips("手机号不能为空"),!1):(a.default.tips("手机号码不正确"),!1);this.deviceId=this.getUUID();var n={mobile:this.phone,deviceId:this.deviceId};(0,s.postUserSms)(n).then(function(e){a.default.tips(e.message),"1000"===e.code&&(t.codeText="重新发送",t.codeNum=59,t.setCodeInterval=setInterval(function(){0===t.codeNum?(t.codeNum="",clearInterval(t.setCodeInterval)):t.codeNum--},1e3))}).catch(function(e){a.default.tips(e.message||"错误")})},dologin:function(){var t=this;if(this.isRight){plus.device.uuid;var n={};n="mini_program"==this.fromWxLoginData.grant_type?{grant_type:"mini_program",scope:"2",client_id:"cwap",client_secret:"xx",deviceId:this.fromWxLoginData.deviceId,systemId:"2",miniCode:this.fromWxLoginData.miniCode,smsCode:this.code,mobile:this.phone,nickName:this.fromWxLoginData.userInfo.nickName,headImg:this.fromWxLoginData.userInfo.avatarUrl}:{grant_type:"wx_app",scope:"2",client_id:"cwap",client_secret:"xx",deviceId:this.fromWxLoginData.deviceId,systemId:"2",accessToken:this.fromWxLoginData.accessToken,openId:this.fromWxLoginData.openId,smsCode:this.code,mobile:this.phone},(0,s.postUserLogin)(n).then(function(n){console.log(e(JSON.stringify(n)," at pages\\login\\binding\\binding.vue:145")),i.setStorageSync("access_token",n.access_token),i.setStorageSync("uid",n.id),i.setStorageSync("phone",t.phone),""!=t.setCodeInterval&&clearInterval(t.setCodeInterval),t.getUserInfo()}).catch(function(t){console.log(e(JSON.stringify(t)," at pages\\login\\binding\\binding.vue:156")),a.default.tips(t.message||"登录错误")})}},getUserInfo:function(){(0,s.getUserInfoData)().then(function(t){"1000"==t.code&&(console.log(e(JSON.stringify(t)," at pages\\login\\binding\\binding.vue:164")),i.setStorageSync("nickName",t.data.nickName),i.setStorageSync("headImgUrl",t.data.headImgUrl),i.navigateBack({delta:2}))}).catch(function(e){a.default.tips(e.message||"获取用户信息错误")})},getUUID:function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var i=e.join("");return i}}};t.default=d}).call(this,n("0de9")["default"],n("6e42")["default"])},"88e0":function(e,t,n){"use strict";var i=n("fa0f"),o=n.n(i);o.a},a2f3:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o})},edaf:function(e,t,n){"use strict";n.r(t);var i=n("6677"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,function(){return i[e]})}(a);t["default"]=o.a},fa0f:function(e,t,n){}},[["243d","common/runtime","common/vendor"]]]);
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/collection/collection"],{"052a":function(t,e,i){"use strict";i.r(e);var o=i("ebc6"),n=i.n(o);for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);e["default"]=n.a},"168f":function(t,e,i){"use strict";i.r(e);var o=i("44b5"),n=i("052a");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("bdd6");var a=i("2877"),c=Object(a["a"])(n["default"],o["a"],o["b"],!1,null,"22fd3a9e",null);e["default"]=c.exports},"2a51":function(t,e,i){"use strict";(function(t){i("b440"),i("921b");o(i("66fd"));var e=o(i("168f"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("6e42")["createPage"])},"44b5":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,o=(t._self._c,i("a15a"));t.$mp.data=Object.assign({},{$root:{m0:o}})},n=[];i.d(e,"a",function(){return o}),i.d(e,"b",function(){return n})},bdd6:function(t,e,i){"use strict";var o=i("d9fb"),n=i.n(o);n.a},d9fb:function(t,e,i){},ebc6:function(t,e,i){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=l(i("8c11")),s=l(i("9e8e")),a=i("7384"),c=l(i("e0d7"));function l(t){return t&&t.__esModule?t:{default:t}}var d=function(){return i.e("components/common/Dialog").then(i.bind(null,"3b86"))},u={data:function(){return{currentPage:1,list:[],isEdit:!1,countChecked:0,total:0,Checked:n.default,Uncheck:s.default,pageSize:10,allLoaded:!1,loadText:"上拉加载更多...",hasAllCheck:!1,ids:[],isShow:!1,title:"您确定从收藏夹删除吗?"}},components:{Dialog:d},onLoad:function(){this.getCollectionData()},onShow:function(){},onReachBottom:function(){this.loadBottom()},methods:{doConfirm:function(){this.doDel()},doCancel:function(){this.isShow=!1},goDetail:function(e,i){t.navigateTo({url:"/pages/order/goodsDetail/goodsDetail?shopId="+e+"&goodsId="+i})},doCheckAll:function(){var t=this;this.ids=[],this.hasAllCheck?(this.hasAllCheck=!1,this.list.forEach(function(e,i){e.isCheck=!1,t.ids=[]})):(this.hasAllCheck=!0,this.list.forEach(function(e,i){e.isCheck=!0,t.ids.push(t.list[i].goodsId)}))},hasAllChecked:function(){var t=this;this.hasAllCheck=!0,this.countChecked=0,this.ids=[],this.list.forEach(function(e,i){e.isCheck?(t.countChecked++,t.ids.push(t.list[i].goodsId)):t.hasAllCheck=!1}),console.log(o(this.countChecked," at pages\\user\\collection\\collection.vue:130"))},doListCheck:function(t){this.list[t].isCheck=!this.list[t].isCheck,this.hasAllChecked()},loadBottom:function(){var t=this;setTimeout(function(){t.allLoaded||(t.currentPage++,t.getCollectionData())},500)},getCollectionData:function(){var t=this,e={pageIndex:this.currentPage,pageSize:this.pageSize};(0,a.getCollectGoodsList)(e).then(function(e){if("1000"===e.code){var i=0;t.list=t.list.concat(e.data.records),t.total=i,t.list.length>=e.data.total&&(t.allLoaded=!0,t.loadText="数据已经加载完毕")}else c.default.tips(e.message||"获取收藏列表失败")}).catch(function(t){c.default.tips(t.message||"获取收藏列表失败")})},edit:function(){var t=this;this.isEdit=!this.isEdit;var e=this.list.map(function(e){return e.isEdit=t.isEdit,e});this.list=e},preDel:function(){if(this.ids.length<1)return c.default.tips("请先选择商品!");this.isShow=!0},doDel:function(){var t=this;this.isShow=!1;var e="";this.ids.forEach(function(i,o){e+=o===t.ids.length-1?i:i+","});var i={goodsId:e};(0,a.getCollectGoodsRemove)(i).then(function(e){"1000"===e.code?(t.ids.forEach(function(e,i){t.list.forEach(function(i,o){e===i.goodsId&&t.list.splice(o,1)})}),t.ids=[]):c.default.tips(e.message||"删除失败")}).catch(function(t){c.default.tips(t.message||"删除失败")})}}};e.default=u}).call(this,i("6e42")["default"],i("0de9")["default"])}},[["2a51","common/runtime","common/vendor"]]]);
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/order/detail"],{"29ee":function(e,t,r){"use strict";(function(e){r("b440"),r("921b");s(r("66fd"));var t=s(r("9358"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("6e42")["createPage"])},"2d18":function(e,t,r){"use strict";(function(e,s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r("7384"),i=a(r("e0d7")),d=a(r("122c"));function a(e){return e&&e.__esModule?e:{default:e}}var n=function(){return r.e("components/order/Good").then(r.bind(null,"d97b"))},u=function(){return Promise.all([r.e("common/vendor"),r.e("components/common/Pay")]).then(r.bind(null,"b0d6"))},c=function(){return r.e("components/common/Dialog").then(r.bind(null,"3b86"))},h={name:"orddetail",data:function(){return{title:"确认收货吗?",isShow:!1,isWx:!1,isPayShow:!1,order:{},orderId:"",shopId:"",statusText:"",status:-2,nowIndexPrice:0,isOrderDialog:0,isPay:0,platform:0,timer:"",expiresTime:""}},components:{Good:n,Pay:u,Dialog:c},onLoad:function(e){this.orderId=e.orderId,this.shopId=e.shopId||1},onShow:function(){this.platform=e.getStorageSync("platform"),this.orderId?this.getOrderDetailById(this.orderId,this.shopId):(i.default.tips("订单ID或店铺ID不能为空"),setTimeout(function(){e.switchTab({url:"/pages/main/main"})},1500))},methods:{doCancel:function(){this.isShow=!1},doConfirm:function(){var e=this,t=this;if(0==t.isOrderDialog){if(this.orderId){var r={orderId:this.orderId};(0,o.postOrderCancel)(r).then(function(r){"1000"===r.code?(t.status=-1,t.statusText="已取消",t.expiresTime="",clearInterval(e.timer),t.isShow=!1):i.default.tips(r.message||"取消订单失败")}).catch(function(e){i.default.tips(e.message||"取消订单失败")})}}else{var s={orderId:this.order.shopOrder.orderId,shopId:this.order.shopOrder.shopId};t.order.shopOrder.orderId&&t.order.shopOrder.shopId?(0,o.postOrderConfirm)(s).then(function(e){"1000"===e.code?(t.isShow=!1,t.goFinshPage()):i.default.tips(e.message||"确认收货失败")}).catch(function(e){i.default.tips(e.message||"确认收货失败")}):i.default.tips("确认收货失败")}},doPay:function(e){},showPay:function(){this.isPayShow=!this.isPayShow,this.nowIndexPrice=this.order.shopOrder.totalMoney},payClose:function(){this.isPayShow=!this.isPayShow},goFinshPage:function(t){e.navigateTo({url:"/pages/user/order/success?orderId="+this.order.shopOrder.orderId+"&shopId"+this.order.shopOrder.shopId})},postOrderConfirm:function(){this.isShow=!0,this.title="确认收货吗?",this.isOrderDialog=1},goFreight:function(){this.order.expressDetails&&(this.order.shopOrder.orderId&&this.order.shopOrder.shopId?e.navigateTo({url:"/pages/user/order/freight?orderId="+this.order.shopOrder.orderId+"&shopId="+this.order.shopOrder.shopId}):i.default.tips("此订单异常，请联系管理员"))},postOrderCancel:function(){this.isShow=!0,this.title="确认取消订单吗?",this.isOrderDialog=0},getOrderDetailById:function(e,t){var r=this,a={orderId:e};t&&(a.shopId=t),(0,o.getOrderDetailById)(a).then(function(e){if("1000"===e.code){if(r.order=e.data[0],0==r.order.shopOrder.status||3==r.order.shopOrder.status){var t=r.order.expiresTime;r.timer=setInterval(function(){t-=1e3,r.expiresTime=0==r.order.shopOrder.status?d.default.MillisecondToDate(t):d.default.getLeftTime(t),t<=0&&clearInterval(r.timer)},1e3)}if(r.statusText="",r.order.shopOrder)switch(r.status=r.order.shopOrder.status,console.log(s("status",r.status," at pages\\user\\order\\detail.vue:279")),r.status){case-1:r.statusText="已取消";break;case 0:r.statusText="待付款";break;case 1:r.statusText="已支付";break;case 2:r.statusText="待发货";break;case 3:r.statusText="待收货";break;case 4:r.statusText="已完成";break;case 5:r.statusText="已关闭";break}}else i.default.tips(e.message||"获取订单详情失败")}).catch(function(e){i.default.tips(e.message||"订单详情获取失败")})}}};t.default=h}).call(this,r("6e42")["default"],r("0de9")["default"])},"60fd":function(e,t,r){"use strict";var s=r("d053"),o=r.n(s);o.a},"65b4":function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,s=(e._self._c,r("8e96")),o=r("e86e"),i=r("e549"),d=r("8247"),a=r("0c8e"),n=r("e549"),u=r("e549"),c=r("e549"),h=r("4b2b"),l=r("c43b"),f=r("4573"),p=r("06b2"),m=r("8b8c");e.$mp.data=Object.assign({},{$root:{m0:s,m1:o,m2:i,m3:d,m4:a,m5:n,m6:u,m7:c,m8:h,m9:l,m10:f,m11:p,m12:m}})},o=[];r.d(t,"a",function(){return s}),r.d(t,"b",function(){return o})},9358:function(e,t,r){"use strict";r.r(t);var s=r("65b4"),o=r("c740");for(var i in o)"default"!==i&&function(e){r.d(t,e,function(){return o[e]})}(i);r("60fd");var d=r("2877"),a=Object(d["a"])(o["default"],s["a"],s["b"],!1,null,"71c0582a",null);t["default"]=a.exports},c740:function(e,t,r){"use strict";r.r(t);var s=r("2d18"),o=r.n(s);for(var i in s)"default"!==i&&function(e){r.d(t,e,function(){return s[e]})}(i);t["default"]=o.a},d053:function(e,t,r){}},[["29ee","common/runtime","common/vendor"]]]);